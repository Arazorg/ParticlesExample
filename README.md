## Пример кода для Matryoshka Games

Задача:
Создавать партиклы в ответ на действия различных объектов, иметь возможность легко добавлять новые типы источников партиклов.

Решение:
Создадим три фабрики реализующие интерфейс IParticlesFactory<T>, будем использовать дженерик для возможности принять фабриками различную информацию, необходимую каждому из типов партиклов для создания.
Каждый из источников партиклов будет реализовывать интерфейс IParticleSpawnEmitter<T> с дженерик эвентом event Action<T> OnParticleSpawned.
T - в данном случае классы информации о партиклах, необходимые им для создания. 
Для реагирования на эвенты создадим обработчик эвентов IParticlesSpawnEventsHandlerService, передадим данный сервис через конструктор во все фабрики которые создают источники партиклов, а также зарегистриуем в нем фабрики, благодаря наличию в обработчике словаря для фабрик Dictionary<Type, object> _factories получим возможность выбрать фабрику в зависимости от класса информации полученного от источника партикла.  
В данном примере рассмотрим фабрику генерации игровых бонусов.
При генерации бонуса - регистрируем его как источник партикла, при разрушении бонуса, вызываем эвент о необходимости создания партикла, обработчик реагирует на эвент, и в зависимости от типа класса полученного через эвент выбирает фабрику и вызывает метод спауна партикла.
Фабрики и обработчик партиклов являются сервисами, регистрируемыми в изначальном стейте, игрой управляет стейт машина, а сервисы возможно получить по интерфейсу, через сервис локатор.  
 
