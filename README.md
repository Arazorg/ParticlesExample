## Пример кода для Matryoshka Games

Задача:<br />
Создавать партиклы в ответ на действия различных объектов, иметь возможность легко добавлять новые типы источников партиклов.

Решение:<br />
Создадим три фабрики реализующие интерфейс IParticlesFactory/<T>/, будем использовать дженерик для возможности принять фабриками различную информацию, необходимую каждому из типов партиклов для создания.<br />
Каждый из источников партиклов будет реализовывать интерфейс IParticleSpawnEmitter<T> с дженерик эвентом event Action<T> OnParticleSpawned.<br />
T - в данном случае классы информации о партиклах, необходимые им для создания.<br /> 
Для реагирования на эвенты создадим обработчик эвентов IParticlesSpawnEventsHandlerService, передадим данный сервис через конструктор во все фабрики которые создают источники партиклов, также зарегистриуем в нем фабрики, благодаря наличию в обработчике словаря для фабрик Dictionary<Type, object> _factories получим возможность выбрать фабрику в зависимости от класса информации полученного от источника партикла.  
В данном примере рассмотрим фабрику генерации игровых бонусов.<br />
В данном случае логика регистрации будет немного отличаться, так как за регистрацию бонусов отвечает отдельный класс(BonusesRegistrar), ввиду того, что необходимо регистрировать блоки в разных сервисах, сути это не меняет, интерфейс реализует родительский класс для всех бонусов SpawnableBonus.
При генерации бонуса - регистрируем его как источник партикла, при разрушении бонуса, вызываем эвент о необходимости создания партикла, обработчик реагирует на эвент, и в зависимости от типа класса полученного через эвент выбирает фабрику и вызывает метод спауна партикла.<br />
Фабрики и обработчик партиклов являются сервисами, регистрируемыми в изначальном стейте, игрой управляет стейт машина, а сервисы возможно получить по интерфейсу, через сервис локатор.  
 
